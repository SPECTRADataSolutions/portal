---
import { getSession } from "auth-astro/server";

const session = await getSession(Astro.request);
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SPECTRA | Modular AI-Powered Pipelines</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap"
    />
    <link rel="stylesheet" href="/src/styles/global.css" />
    <style>
      html {
        scroll-behavior: smooth;
      }
      
      .nav-link {
        position: relative;
        transition: color 0.3s ease;
      }
      
      .nav-link.active {
        color: var(--spectra-gold);
      }
      
      .nav-link.active::after {
        content: '';
        position: absolute;
        bottom: -4px;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: var(--spectra-gold);
        border-radius: 1px;
      }
    </style>
  </head>
  <body class="bg-spectra-smoke text-spectra-ink font-sans">
    <!-- Title Bar -->
    <header class="bg-spectra-blue text-white py-4 px-6">
      <div class="max-w-5xl mx-auto flex justify-between items-center">
        <div class="flex items-center">
          <img
            src="https://github.com/SPECTRADataSolutions/framework/blob/main/assets/images/spectraLogo.png?raw=true"
            alt="SPECTRA Logo"
            class="h-8 mr-3"
          />
          <h1
            class="text-xl font-bold"
            style="font-family: 'Poppins', sans-serif;"
          >
            SPECTRA
          </h1>
        </div>
        <nav>
          <ul class="flex space-x-6 items-center">
            <li>
              <a href="#about" class="nav-link hover:text-spectra-gold transition-colors">About Us</a>
            </li>
            <li>
              <a href="#what-we-do" class="nav-link hover:text-spectra-gold transition-colors">What We Do</a>
            </li>
            <li>
              <a href="#framework" class="nav-link hover:text-spectra-gold transition-colors">Framework</a>
            </li>
            <li>
              <a href="#contact" class="nav-link hover:text-spectra-gold transition-colors">Contact</a>
            </li>
            {
              session ? (
                <>
                  <li>
                    <a href="/dashboard" class="hover:underline">
                      Dashboard
                    </a>
                  </li>
                  <li class="flex items-center space-x-2">
                    <img
                      src={session.user?.image || "/default-avatar.png"}
                      alt="User Avatar"
                      class="w-6 h-6 rounded-full"
                    />
                    <span class="text-sm">
                      {session.user?.name || session.user?.email}
                    </span>
                  </li>
                  <li>
                    <a
                      href="/api/auth/signout"
                      class="px-3 py-1 bg-spectra-orange hover:bg-spectra-gold text-spectra-ink rounded text-sm font-medium transition-colors"
                    >
                      Sign Out
                    </a>
                  </li>
                </>
              ) : (
                <li>
                  <a
                    href="/login"
                    class="px-3 py-1 bg-spectra-orange hover:bg-spectra-gold text-spectra-ink rounded text-sm font-medium transition-colors"
                  >
                    Sign In
                  </a>
                </li>
              )
            }
          </ul>
        </nav>
      </div>
    </header>

    <!-- Hero Section -->
    <section class="bg-spectra-dark text-spectra-cloud py-20 px-6 text-center">
      <img
        src="https://github.com/SPECTRADataSolutions/framework/blob/main/assets/images/spectraLogo.png?raw=true"
        alt="SPECTRA Logo"
        class="mx-auto mb-4 h-20"
      />
      <h1
        class="text-6xl font-bold tracking-tight"
        style="font-family: 'Poppins', sans-serif;"
      >
        SPECTRA
      </h1>
      <p class="text-xl mt-4">
        Modular AI-powered data pipelines for Microsoft Fabric
      </p>
    </section>

    <!-- About SPECTRA -->
    <section id="about" class="py-20 px-6 bg-spectra-smoke">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-3xl font-bold text-spectra-blue mb-6">
          About SPECTRA
        </h2>
        <div class="text-lg text-spectra-ink leading-relaxed space-y-4">
          <p>
            SPECTRA Data Solutions is pioneering the future of data automation
            through our modular AI-powered pipeline platform. We're on a mission
            to democratize enterprise-grade data capabilities, making
            sophisticated data processing accessible to organizations of every
            size.
          </p>
          <p>
            Our goal is to eliminate the complexity and cost barriers that have
            traditionally prevented businesses from harnessing the full
            potential of their data. By providing intelligent, automated data
            pipelines that integrate seamlessly with Microsoft Fabric, we're
            empowering organizations to focus on insights rather than
            infrastructure.
          </p>
          <p>
            <strong>For small businesses:</strong> We offer affordable, plug-and-play
            solutions that provide enterprise-level data capabilities without the
            enterprise-level complexity or cost. Get started quickly with pre-built
            connectors and automated workflows that scale with your growth.
          </p>
          <p>
            <strong>For large enterprises:</strong> We deliver comprehensive, scalable
            data architecture that handles complex multi-source integrations, advanced
            governance requirements, and enterprise-grade security while reducing
            operational overhead and time-to-insight.
          </p>
        </div>
      </div>
    </section>

    <!-- Trusted By -->
    <section class="bg-spectra-cloud py-10 px-6 text-center">
      <p class="uppercase text-sm tracking-wide text-spectra-blue mb-4">
        Trusted by
      </p>
      <div class="flex justify-center gap-12 grayscale opacity-80">
        <img src="/logos/dxc.svg" alt="DXC" class="h-10" />
        <img src="/logos/velonetic.svg" alt="Velonetic" class="h-10" />
        <img src="/logos/lloyds.svg" alt="Lloyds of London" class="h-10" />
      </div>
    </section>
    <!-- What We Do -->
    <section id="what-we-do" class="py-20 px-6 bg-spectra-cloud">
      <div class="max-w-5xl mx-auto text-center">
        <h2 class="text-3xl font-bold text-spectra-blue mb-4">
          What We Do
        </h2>
        <p class="text-lg text-spectra-ink mb-8">
          The SPECTRA Engine is designed to automate every stage of your data lifecycle.
        </p>
        <div class="flex flex-wrap justify-center gap-4 text-left">
          <div class="bg-white p-2 rounded shadow w-40">
            <h3 class="font-bold text-spectra-blue text-sm">Source</h3>
            <p class="text-xs mt-1">
              Secure connection to any API, app or source system.
            </p>
          </div>
          <div class="bg-white p-2 rounded shadow w-40">
            <h3 class="font-bold text-spectra-blue text-sm">Prepare</h3>
            <p class="text-xs mt-1">
              Ingest, checkpoint and validate control tables.
            </p>
          </div>
          <div class="bg-white p-2 rounded shadow w-40">
            <h3 class="font-bold text-spectra-blue text-sm">Extract</h3>
            <p class="text-xs mt-1">
              Smart extract logic with schema awareness and paging.
            </p>
          </div>
          <div class="bg-white p-2 rounded shadow w-40">
            <h3 class="font-bold text-spectra-blue text-sm">Clean</h3>
            <p class="text-xs mt-1">
              Flatten, restructure, rename and timestamp.
            </p>
          </div>
          <div class="bg-white p-2 rounded shadow w-40">
            <h3 class="font-bold text-spectra-blue text-sm">Transform</h3>
            <p class="text-xs mt-1">
              Model-ready formats for semantic layers and BI tooling.
            </p>
          </div>
          <div class="bg-white p-2 rounded shadow w-40">
            <h3 class="font-bold text-spectra-blue text-sm">Refine</h3>
            <p class="text-xs mt-1">
              Optimise for cost, scale, performance and storage class.
            </p>
          </div>
          <div class="bg-white p-2 rounded shadow w-40">
            <h3 class="font-bold text-spectra-blue text-sm">Analyse</h3>
            <p class="text-xs mt-1">
              Power BI, Fabric, semantic KPIs and AI triggers.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Framework -->
    <section id="framework" class="py-20 px-6 bg-spectra-smoke">
      <div class="max-w-5xl mx-auto text-center">
        <h2 class="text-3xl font-bold text-spectra-blue mb-4">
          Framework
        </h2>
        <p class="text-lg text-spectra-ink mb-8">
          Our modular framework provides the foundation for scalable data solutions.
        </p>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 text-left">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-spectra-blue text-lg mb-3">Modular Architecture</h3>
            <p class="text-sm text-spectra-ink">
              Built with microservices architecture enabling flexible deployment and scaling of individual components.
            </p>
          </div>
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-spectra-blue text-lg mb-3">Microsoft Fabric Integration</h3>
            <p class="text-sm text-spectra-ink">
              Native integration with Microsoft Fabric for seamless data platform experiences.
            </p>
          </div>
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-spectra-blue text-lg mb-3">AI-Powered Automation</h3>
            <p class="text-sm text-spectra-ink">
              Intelligent automation that learns and adapts to optimize data processing workflows.
            </p>
          </div>
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-spectra-blue text-lg mb-3">Enterprise Security</h3>
            <p class="text-sm text-spectra-ink">
              Advanced security features including encryption, access controls, and compliance monitoring.
            </p>
          </div>
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-spectra-blue text-lg mb-3">Scalable Performance</h3>
            <p class="text-sm text-spectra-ink">
              Designed to handle data volumes from small datasets to enterprise-scale processing.
            </p>
          </div>
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="font-bold text-spectra-blue text-lg mb-3">Real-time Processing</h3>
            <p class="text-sm text-spectra-ink">
              Support for both batch and real-time data processing to meet diverse business needs.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Explore More -->
    <section class="py-20 px-6 text-center">
      <h2 class="text-3xl font-bold text-spectra-blue mb-4">Explore More</h2>
      <div class="flex justify-center gap-6">
        <a
          href="/vision"
          class="px-6 py-3 bg-spectra-blue text-white rounded-lg shadow-md hover:bg-spectra-orange transition"
          >Our Vision</a
        >
        <a
          href="/strategic-plan"
          class="px-6 py-3 bg-spectra-blue text-white rounded-lg shadow-md hover:bg-spectra-orange transition"
          >Strategic Plan</a
        >
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="py-20 px-6 bg-spectra-cloud">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-3xl font-bold text-spectra-blue mb-6">
          Contact Us
        </h2>
        <p class="text-lg text-spectra-ink mb-8">
          Ready to transform your data infrastructure? Get in touch with our team.
        </p>
        <div class="grid md:grid-cols-2 gap-8">
          <div class="bg-white p-8 rounded-lg shadow-md">
            <h3 class="text-xl font-bold text-spectra-blue mb-4">Get Started</h3>
            <p class="text-spectra-ink mb-4">
              Schedule a consultation to discuss your data needs and explore how SPECTRA can help.
            </p>
            <a
              href="/contact"
              class="inline-block px-6 py-3 bg-spectra-blue text-white rounded-lg shadow-md hover:bg-spectra-orange transition"
            >
              Contact Form
            </a>
          </div>
          <div class="bg-white p-8 rounded-lg shadow-md">
            <h3 class="text-xl font-bold text-spectra-blue mb-4">Learn More</h3>
            <p class="text-spectra-ink mb-4">
              Explore our comprehensive documentation and resources to understand our solutions.
            </p>
            <a
              href="/vision"
              class="inline-block px-6 py-3 bg-spectra-blue text-white rounded-lg shadow-md hover:bg-spectra-orange transition"
            >
              Our Vision
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Footer -->
    <section class="bg-spectra-blue text-white py-12 px-6 text-center">
      <h2 class="text-2xl font-semibold mb-4">
        Ready to see the SPECTRA effect?
      </h2>
      {
        session ? (
          <a
            href="/dashboard"
            class="inline-block px-6 py-3 bg-spectra-gold hover:bg-spectra-orange text-spectra-ink rounded-lg shadow-md transition"
          >
            Go to Dashboard
          </a>
        ) : (
          <a
            href="/login"
            class="inline-block px-6 py-3 bg-spectra-gold hover:bg-spectra-orange text-spectra-ink rounded-lg shadow-md transition"
          >
            Sign In to Get Started
          </a>
        )
      }
    </section>

    <script>
      // Handle active navigation state based on scroll position
      const navLinks = document.querySelectorAll('.nav-link');
      const sections = document.querySelectorAll('section[id]');
      
      function updateActiveNavigation() {
        const scrollPosition = window.scrollY + 100; // Offset for header
        
        sections.forEach(section => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.offsetHeight;
          const sectionId = section.getAttribute('id');
          
          if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
            navLinks.forEach(link => {
              link.classList.remove('active');
              if (link.getAttribute('href') === `#${sectionId}`) {
                link.classList.add('active');
              }
            });
          }
        });
      }
      
      // Update active navigation on scroll
      window.addEventListener('scroll', updateActiveNavigation);
      
      // Update active navigation on page load
      updateActiveNavigation();
    </script>
  </body>
</html>
